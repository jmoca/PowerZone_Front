{
  "version": 3,
  "sources": ["src/app/Service/auth.service.ts"],
  "sourcesContent": ["import {Injectable} from '@angular/core';\r\nimport {HttpClient} from \"@angular/common/http\";\r\nimport {Observable, tap} from \"rxjs\";\r\nimport {ProfileService} from \"./profile.service\";\r\nimport {environment} from \"../../environments/environment.prod\";\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class AuthService {\r\n    private currentUser: { username: string, nickname: string } | null = null;\r\n\r\n    constructor(\r\n        private http: HttpClient,\r\n    ) {}\r\n\r\n    // Iniciar sesi贸n y manejar el almacenamiento\r\n    login(loginData: { email: string, password: string }): Observable<any> {\r\n        return this.http.post<any>(environment.apiUrl + '/auth/login', loginData).pipe(\r\n            tap(response => {\r\n                console.log('Respuesta del servidor:', response); // Verifica la respuesta\r\n\r\n                // Guardar el token en sessionStorage\r\n                const token = response.token;\r\n                if (token) {\r\n                    sessionStorage.setItem('token', token);\r\n                }\r\n\r\n                // Guardar username y nickname en localStorage\r\n                const username = response.username;\r\n                const nickname = response.nickname;\r\n                if (username && nickname) {\r\n                    localStorage.setItem('username', username);\r\n                    localStorage.setItem('nickname', nickname);\r\n                }\r\n\r\n                // Actualizar la informaci贸n actual del usuario\r\n                this.currentUser = { username, nickname };\r\n            })\r\n        );\r\n    }\r\n\r\n\r\n    // Obtener el token desde sessionStorage\r\n    getToken(): string | null {\r\n        return sessionStorage.getItem('token');\r\n    }\r\n\r\n    // Cerrar sesi贸n eliminando datos del almacenamiento\r\n    logout(): void {\r\n        sessionStorage.removeItem('token'); // Eliminar token de sessionStorage\r\n        localStorage.removeItem('username'); // Eliminar username de localStorage\r\n        localStorage.removeItem('nickname'); // Eliminar nickname de localStorage\r\n        this.currentUser = null; // Restablecer la informaci贸n actual\r\n    }\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;AASM,IAAO,eAAP,MAAO,aAAW;EAGpB,YACY,MAAgB;AAAhB,SAAA,OAAA;AAHJ,SAAA,cAA6D;EAIlE;;EAGH,MAAM,WAA8C;AAChD,WAAO,KAAK,KAAK,KAAU,YAAY,SAAS,eAAe,SAAS,EAAE,KACtE,IAAI,cAAW;AACX,cAAQ,IAAI,2BAA2B,QAAQ;AAG/C,YAAM,QAAQ,SAAS;AACvB,UAAI,OAAO;AACP,uBAAe,QAAQ,SAAS,KAAK;MACzC;AAGA,YAAM,WAAW,SAAS;AAC1B,YAAM,WAAW,SAAS;AAC1B,UAAI,YAAY,UAAU;AACtB,qBAAa,QAAQ,YAAY,QAAQ;AACzC,qBAAa,QAAQ,YAAY,QAAQ;MAC7C;AAGA,WAAK,cAAc,EAAE,UAAU,SAAQ;IAC3C,CAAC,CAAC;EAEV;;EAIA,WAAQ;AACJ,WAAO,eAAe,QAAQ,OAAO;EACzC;;EAGA,SAAM;AACF,mBAAe,WAAW,OAAO;AACjC,iBAAa,WAAW,UAAU;AAClC,iBAAa,WAAW,UAAU;AAClC,SAAK,cAAc;EACvB;;;mCA7CS,cAAW,mBAAA,UAAA,CAAA;AAAA;gFAAX,cAAW,SAAX,aAAW,WAAA,YAFR,OAAM,CAAA;AAEhB,IAAO,cAAP;",
  "names": []
}
